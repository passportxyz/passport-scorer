# ALB Listener Rule Priority Changes Summary

## All Priority Changes to Avoid Conflicts

The old infrastructure created listener rules with specific priorities that still exist in AWS.
All priorities have been shifted to new values to avoid conflicts:

### V2 API Endpoints
- 2021 → 2110 (v2/models/score)
- 2023 → 2112 (v2/stamps/score)

### Ceramic Cache & Submit Endpoints
- 1000 → 1011 (submit-passport)
- 1001 → 1012 (ceramic-cache/score POST)
- 1002 → 1013 (ceramic-cache/stamps/bulk POST)
- 1003 → 1014 (ceramic-cache/stamps/bulk PATCH)
- 1004 → 1015 (ceramic-cache/stamps/bulk DELETE)
- 1005 → 1016 (passport/analysis)
- 1006 → 1017 (ceramic-cache/score GET)
- 1007 → 1018 (ceramic-cache/weights)
- 1008 → 1019 (ceramic-cache/stamp)
- 1010 → 1020 (registry fallback)

### Internal ALB - Embed Endpoints
- 2100 → 2104 (internal/embed/stamps)
- 2101 → 2105 (internal/embed/validate-api-key)
- 2103 → 2106 (internal/embed/score)

## Priority Ranges After Changes
- 1011-1020: Ceramic Cache & Submit endpoints
- 2104-2106: Internal ALB Embed endpoints
- 2110-2112: V2 API endpoints
- 3000-3001: App API endpoints (unchanged)

## Rationale
Rather than manually deleting old listener rules from AWS (which would require downtime and coordination),
we shifted all conflicting priorities to new values. This allows the new infrastructure to deploy cleanly
in both staging and production without requiring manual AWS cleanup.
